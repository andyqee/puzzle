<%inherit file='base.html'/>
<%block name='header'>
    <script type="text/javascript" src="/static/js/pages/project.js"></script>
</%block>
<%block name='body'>
    <div class='container'>
    <%include file='/components/reportSelect.html'/>

    <table class="table table-bordered">
        <tbody>
        <%
        color = "#F7F7F0"
        color2 = "#cde"
        color3 = "#FDE9D9"
        color4 = "#e7ffff"
        %>
        <tr>
            <td rowspan="2" align="center" bgcolor="${color}">PMTID</td>
            <td rowspan="2" align="center" bgcolor="${color}">项目名称</td>
            <td rowspan="2" align="center" bgcolor="${color}">工程结束</td>
            <td rowspan="2" align="center" bgcolor="${color}">开发</td>
            <td rowspan="2" bgcolor="${color}">测试</td>
            <td rowspan="2" bgcolor="${color}">自测通过率</td>
            <td colspan="4" align="center" bgcolor="${color2}">Bug数（项目bug）</td>
            <td colspan="5" align="center" bgcolor="${color3}">bug等级（APP&项目bug）</td>
            <td colspan="4" align="center" bgcolor="${color4}">测试阶段（APP）</td>
        </tr>
        <tr>
            <td align="center" bgcolor="${color2}">总数</td>
            <td align="center" bgcolor="${color2}">APP</td>
            <td align="center" bgcolor="${color2}">API</td>
            <td align="center" bgcolor="${color2}">产品</td>
            <td align="center" bgcolor="${color3}">p1</td>
            <td align="center" bgcolor="${color3}">p2</td>
            <td align="center" bgcolor="${color3}">p3</td>
            <td align="center" bgcolor="${color3}">p4</td>
            <td align="center" bgcolor="${color3}">p5</td>
            <td align="center" bgcolor="${color4}">daily</td>
            <td align="center" bgcolor="${color4}">rc</td>
            <td align="center" bgcolor="${color4}">真机</td>
            <td align="center" bgcolor="${color4}">线上</td>
        </tr>
        % for index in data['project_bug']:
            <%
            item = data['project_bug'][index]
            from model.GlobalFunc import get_pmt_url
            from model.GlobalFunc import report_html
            pmt_url = get_pmt_url(item['pmt_id'])

            if item['endtime']=='':
                bgcolor = '#F6F0F0'
            else:
                bgcolor =''
        %>
            <tr bgcolor="${bgcolor}">
            <td><a href="${pmt_url}" target="_blank">${item['pmt_id']}</a></td>
            <td>${item['name']}<a class="label label-info tTip" rel="popover" tt="${item['created']}">注</a></td>
            <td>${item['endtime']}</td>
            <td>${item['developer']}</td>
            <td>${item['qa']}</td>
            <td>${item['rate']}</td>
            <td>${report_html(item,'total',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'app',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'api',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'product',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'p1',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'p2',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'p3',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'p4',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'p5',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'test',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'dev',item['pmt_id'],'index',True,0,0)}</td>
            <td>${report_html(item,'prerelease',item['pmt_id'],'index',True,0,2)}</td>
            <td>${report_html(item,'production',item['pmt_id'],'index',True,0,0)}</td>
            </tr>
    % endfor
    </tbody>
</table>
</div>
<script>$(document).ready(function(){
    $('a.tTip').tinyTips();
}
);</script>
<link href="/static/js/plugins/tinytip/tinyTips.css" rel="stylesheet">
<script type="text/javascript" src="/static/js/plugins/tinytip/jquery.tinyTips.js"></script>
</%block>
